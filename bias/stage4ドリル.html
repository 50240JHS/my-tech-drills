<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>æ¢ç©¶ãƒ‰ãƒªãƒ«ï¼šæ”¯é…ã¨èª¤è¬¬ï¼ˆãƒãƒƒãƒ—é€£æºï¼‰</title>
  <style>
    body { font-family: "Yu Gothic", sans-serif; background: #f7f9fb; padding: 2em; }
    h1, h2, h3 { color: #002244; }
    section { margin-bottom: 3em; border: 1px solid #ccc; padding: 1em; background: #fff; border-radius: 10px; }
    textarea { width: 100%; height: 4em; margin-top: 0.5em; font-size: 1em; }
    .option { margin-top: 0.8em; padding: 0.7em; cursor: pointer; border-radius: 5px; }
    .option:hover { background-color: #eef; }
    .feedback { padding: 1em; margin-top: 1em; border-left: 5px solid #66a; background: #eef; }
    .bias-natural { background: #ccf; }
    .bias-moral { background: #cfc; }
    .bias-struct { background: #fdd; }
    .hidden { display: none; }
    #progressBar { margin-top: 2em; background: #ccc; border-radius: 10px; height: 20px; overflow: hidden; }
    #progressFill { height: 100%; background: #339; width: 0%; transition: width 0.5s; }
  </style>
</head>
<body>
<h1>AIã¨èª¤è¬¬ã®æ¢ç©¶ãƒãƒƒãƒ—</h1>
<div id="progressBar"><div id="progressFill"></div></div>
<section id="stage1">
  <h2>Stage 1ï¼šã‚„ã•ã—ã•ã®è£ã«ã‚ã‚‹ã‚‚ã®</h2>
  <p>ã€Œã‚„ã•ã—ã„AIã€ã¨ã¯ã©ã‚“ãªå­˜åœ¨ã‹ï¼Ÿ</p>
  <div class="option bias-natural" onclick="chooseOption(1,'è‡ªç„¶çš„èª¤è¬¬','AIã¯è‡ªç„¶ã«æ­£ã—ãåˆ¤æ–­ã—ã¦ãã‚Œã‚‹')">AIã¯è‡ªç„¶ã«æ­£ã—ãåˆ¤æ–­ã—ã¦ãã‚Œã‚‹</div>
  <div class="option bias-moral" onclick="chooseOption(1,'é“å¾³çš„èª¤è¬¬','AIã¯å–„æ„ã§ç§ãŸã¡ã‚’åŠ©ã‘ã¦ãã‚Œã‚‹')">AIã¯å–„æ„ã§ç§ãŸã¡ã‚’åŠ©ã‘ã¦ãã‚Œã‚‹</div>
  <div class="option bias-struct" onclick="chooseOption(1,'æ§‹é€ çš„æ”¯é…','ã‚„ã•ã—ã•ã®ä¸­ã«ç®¡ç†æ§‹é€ ãŒã‚ã‚‹ã‹ã‚‚')">ã‚„ã•ã—ã•ã®ä¸­ã«ç®¡ç†æ§‹é€ ãŒã‚ã‚‹ã‹ã‚‚</div>
  <textarea placeholder="AIã‚’ä½¿ã£ã¦ã„ã¦ä¸å®‰ã«æ€ã£ãŸçµŒé¨“ãŒã‚ã‚Œã°æ›¸ã„ã¦ã¿ã‚ˆã†"></textarea>
  <div id="feedback1" class="feedback hidden"></div>
</section>

<section id="stage2" class="hidden">
  <h2>Stage 2ï¼šå•ã„è¿”ã—ã¦ã¿ã‚‹</h2>
  <p>AIã«ä½•ã§ã‚‚èã‘ã‚‹æ™‚ä»£â”€â”€ã§ã‚‚ã€è‡ªåˆ†ã®åˆ¤æ–­åŠ›ã¯ã©ã†ãªã‚‹ï¼Ÿ</p>
  <textarea placeholder="ã€Œãªãœãã†æ€ã†ã®ã‹ï¼Ÿã€ã€Œæœ¬å½“ã«ãã†ã‹ï¼Ÿã€ã¨å•ã„è¿”ã—ã¦ã¿ã‚ˆã†"></textarea>
</section>

<section id="stage3" class="hidden">
  <h2>Stage 3ï¼šæ§‹é€ ã‚’è¦‹æŠœã</h2>
  <p>AIã®ã‚„ã•ã—ã•ãŒã€Œå•ã„ã‚’æ­¢ã‚ã‚‹åŠ›ã€ã«ãªã£ã¦ã„ãªã„ã‹ï¼Ÿ</p>
  <textarea placeholder="ã€Œå•ã„ãŒæ­¢ã¾ã‚‹ã€ã£ã¦ã©ã†ã„ã†ã“ã¨ã ã¨æ€ã†ï¼Ÿ"></textarea>
</section>

<section id="stage4" class="hidden">
  <h2>Stage 4ï¼šãƒã‚¤ã‚¢ã‚¹ã‚’å¯è¦–åŒ–ã™ã‚‹</h2>
  <p>é¸ã‚“ã èªã‚Šã¯ã©ã‚“ãªãƒã‚¤ã‚¢ã‚¹ã®è‰²ã‚’ã—ã¦ã„ã‚‹ï¼Ÿ</p>
  <div id="biasMap"></div>
</section>

<section id="stage5" class="hidden">
  <h2>Stage 5ï¼šå•ã„ã®å…ˆã«ä½•ã‚’ã™ã‚‹ï¼Ÿ</h2>
  <p>ã“ã®æ¢ç©¶ã‚’æ—¥å¸¸ã®ä¸­ã§ã©ã†æ´»ã‹ã™ï¼Ÿ</p>
  <textarea placeholder="AIã‚„ç¤¾ä¼šã¨ã®é–¢ä¿‚ã§ã€è‡ªåˆ†ãŒå®Ÿéš›ã«ã§ãã‚‹ä¸€æ­©ã¯ï¼Ÿ"></textarea>
</section>

<p style="margin-top:2em;">
  <button onclick="saveProgress()">ğŸ’¾ ä¿å­˜</button>
  <button onclick="loadProgress()">ğŸ“‚ ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</button>
</p>

<script>
let currentStage = 1;
let answers = {};

function chooseOption(stage, type, msg) {
  document.getElementById(`feedback${stage}`).innerHTML = `${type}ï¼š${msg}`;
  document.getElementById(`feedback${stage}`).classList.remove('hidden');
  answers[`stage${stage}`] = {type: type, message: msg};
  advanceStage();
}

function advanceStage() {
  if (currentStage < 5) {
    currentStage++;
    document.getElementById(`stage${currentStage}`).classList.remove('hidden');
    document.getElementById("progressFill").style.width = (currentStage * 20) + "%";
  }
}

function saveProgress() {
  let data = {
    answers: answers,
    notes: Array.from(document.querySelectorAll('textarea')).map(t => t.value),
    date: new Date().toLocaleString()
  };
  const blob = new Blob([JSON.stringify(data, null, 2)], {type: "application/json"});
  const link = document.createElement("a");
  link.href = URL.createObjectURL(blob);
  link.download = "drill_progress_" + new Date().toISOString().replace(/[:.]/g, '-') + ".json";
  link.click();
}

function loadProgress() {
  const input = document.createElement("input");
  input.type = "file";
  input.accept = "application/json";
  input.onchange = e => {
    const file = e.target.files[0];
    const reader = new FileReader();
    reader.onload = () => {
      const data = JSON.parse(reader.result);
      answers = data.answers || {};
      const notes = data.notes || [];
      notes.forEach((text, idx) => {
        if (document.querySelectorAll('textarea')[idx]) {
          document.querySelectorAll('textarea')[idx].value = text;
        }
      });
      currentStage = notes.length;
      for (let i = 2; i <= currentStage; i++) {
        document.getElementById(`stage${i}`).classList.remove('hidden');
      }
      document.getElementById("progressFill").style.width = (currentStage * 20) + "%";
    };
    reader.readAsText(file);
  };
  input.click();
}
</script>
</body>
</html>
